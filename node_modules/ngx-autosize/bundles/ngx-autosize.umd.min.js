!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-autosize",["exports","@angular/core"],e):e((t=t||self)["ngx-autosize"]={},t.ng.core)}(this,function(t,e){"use strict";var i=function(){function t(){}return Object.defineProperty(t.prototype,"nativeWindow",{get:function(){return window},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Injectable}],t}(),o=function(){function t(t,i,o){this.element=t,this._window=i,this._zone=o,this.onlyGrow=!1,this.useImportant=!1,this.resized=new e.EventEmitter,this.autosize=!0,this.retries=0,this._destroyed=!1,"TEXTAREA"!==this.element.nativeElement.tagName?this._findNestedTextArea():(this.textAreaEl=this.element.nativeElement,this.textAreaEl.style["overflow-y"]="hidden",this._onTextAreaFound())}return Object.defineProperty(t.prototype,"minRows",{set:function(t){this._minRows=t,this.textAreaEl&&(this.textAreaEl.rows=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_autosize",{set:function(t){this.autosize="boolean"!=typeof t||t},enumerable:!0,configurable:!0}),t.prototype.onInput=function(t){this.adjust()},t.prototype.ngOnDestroy=function(){this._destroyed=!0,this._windowResizeHandler&&this._window.nativeWindow.removeEventListener("resize",this._windowResizeHandler,!1)},t.prototype.ngAfterContentChecked=function(){this.adjust()},t.prototype.ngOnChanges=function(t){this.adjust(!0)},t.prototype._findNestedTextArea=function(){var t=this;this.textAreaEl=this.element.nativeElement.querySelector("TEXTAREA"),!this.textAreaEl&&this.element.nativeElement.shadowRoot&&(this.textAreaEl=this.element.nativeElement.shadowRoot.querySelector("TEXTAREA")),this.textAreaEl?(this.textAreaEl.style["overflow-y"]="hidden",this._onTextAreaFound()):this.retries>=3?console.warn("ngx-autosize: textarea not found"):(this.retries++,setTimeout(function(){t._findNestedTextArea()},100))},t.prototype._onTextAreaFound=function(){var t=this;this._addWindowResizeHandler(),setTimeout(function(){t.adjust()})},t.prototype._addWindowResizeHandler=function(){var t=this;this._windowResizeHandler=function(t,e,i){void 0===i&&(i=!1);var o;return function(){var n=this,r=arguments,s=function(){o=null,i||t.apply(n,r)},a=i&&!o;clearTimeout(o),o=setTimeout(s,e),a&&t.apply(n,r)}}(function(){t._zone.run(function(){t.adjust()})},200),this._zone.runOutsideAngular(function(){t._window.nativeWindow.addEventListener("resize",t._windowResizeHandler,!1)})},t.prototype.adjust=function(t){if(void 0===t&&(t=!1),this.autosize&&!this._destroyed&&this.textAreaEl&&this.textAreaEl.parentNode){var e=this.textAreaEl.value;if(!1===t&&e===this._oldContent&&this.textAreaEl.offsetWidth===this._oldWidth)return;this._oldContent=e,this._oldWidth=this.textAreaEl.offsetWidth;var i=this.textAreaEl.cloneNode(!0),o=this.textAreaEl.parentNode;i.style.width=this.textAreaEl.offsetWidth+"px",i.style.visibility="hidden",i.style.position="absolute",i.textContent=e,o.appendChild(i),i.style["overflow-y"]="hidden",i.style.height="auto";var n=i.scrollHeight,r=this._window.nativeWindow.getComputedStyle(i,null);n+=parseInt(r.getPropertyValue("border-top-width")),n+=parseInt(r.getPropertyValue("border-bottom-width")),n+=parseInt(r.getPropertyValue("padding-top")),n+=parseInt(r.getPropertyValue("padding-bottom"));var s=this.textAreaEl.offsetHeight,a=n>s;if(!1===this.onlyGrow||a){var d=this._getLineHeight(),l=n/d;if(this._minRows&&this._minRows>=l)n=this._minRows*d;else if(this.maxRows&&this.maxRows<=l){var u=this.maxRows*d;n=this.onlyGrow?Math.max(u,s):u,this.textAreaEl.style["overflow-y"]="auto"}else this.textAreaEl.style["overflow-y"]="hidden";var h=n+"px",p=this.useImportant?"important":"";this.textAreaEl.style.setProperty("height",h,p),this.resized.emit(n)}o.removeChild(i)}},t.prototype._getLineHeight=function(){var t=parseInt(this.textAreaEl.style.lineHeight,10);if(isNaN(t)&&this._window.nativeWindow.getComputedStyle){var e=this._window.nativeWindow.getComputedStyle(this.textAreaEl);t=parseInt(e.lineHeight,10)}if(isNaN(t)){var i=this._window.nativeWindow.getComputedStyle(this.textAreaEl,null).getPropertyValue("font-size");t=Math.floor(1.5*parseInt(i.replace("px",""),10))}return t},t.decorators=[{type:e.Directive,args:[{selector:"[autosize]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:i},{type:e.NgZone}]},t.propDecorators={minRows:[{type:e.Input}],_autosize:[{type:e.Input,args:["autosize"]}],maxRows:[{type:e.Input}],onlyGrow:[{type:e.Input}],useImportant:[{type:e.Input}],resized:[{type:e.Output}],onInput:[{type:e.HostListener,args:["input",["$event.target"]]}]},t}();var n=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[o],imports:[],providers:[i],exports:[o]}]}],t}();t.AutosizeDirective=o,t.AutosizeModule=n,t.Éµa=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-autosize.umd.min.js.map